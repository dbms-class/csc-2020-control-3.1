# Третья контрольная курса Базы Данных в CSC
Контрольная работа модуля №3. Вариант 1




### Инициализация БД
по умолчанию пользователь postgres с пустым паролем на localhost:5432/postgres

```
psql -h localhost -U postgres -f marsoflot.sql
```

### Запуск приложения
```
python3 app.py
```

Если нужно поменять хост, порт, пользователя, базу данных или пароль, воспользуйтесь аргументами командной строки. `python3 app.py -h`  вам про них расскажут.

### Как сдавать
Пул-реквест в репозиторий `github.com/dbms-class/csc-2020-control-3.1` или письмо с заархивированным кодом на `dmitry+csc@barashev.net`. Пожалуйста, не присылайте в архиве каталоги `build`, `.gradle` и `.idea` 

### ответ
Хм, ну у меня за 15 минут не вышло завести эту радость (не генерятся данные в постгресе), поэтому исправлять я в коде ничего не буду вслепую, и будем играть в вангу
1) app.py: 34
данный драйвер не поддерживает использование менеджера контекста, нужно руками возвращать коннекцию в пул

2) app.py: 113
данный драйвер не поддерживает использование менеджера контекста, нужно руками возвращать коннекцию в пул

3) app.py: 108
данный драйвер не поддерживает использование менеджера контекста, нужно руками возвращать коннекцию в пул
но если мы так сделаем (уберем менеджер контекста), то у нас перестанет подтверждаться транзация, поэтому нужно будет еще и это делать руками

4) app.py: 122
этот метод ничего не делает, поскольку не происходит подтверждения транзакции. Сомнительным выглядит также строка 120, мало ли что, я бы запихнула её тоже в try.
Почему, кстати, в конце коннекция закрывается? Если N раз вызвать этот метод, что-то мне подсказывает, что мы закроем все коннекции в пуле и больше нам их не дадут. Поэтому вместо закрытия коннекции,
там её надо возвращать в пул.
Поэтому в этом методе * надо возвращать коннекцию в пул с try/finally
* надо подтверждать транзакцию